# h7 Hash
## x) Lue/katso/kuuntele ja tiivistä.
- [Karvinen 2022: Cracking Passwords with Hashcat](https://terokarvinen.com/2022/cracking-passwords-with-hashcat/)

Hashcatin asennus ja sanakirjan lataaminen (rockyou.txt).

      $ sudo apt-get -y install hashid hashcat wget
      $ wget https://github.com/danielmiessler/SecLists/raw/master/Passwords/Leaked-Databases/rockyou.txt.tar.gz
Hash tyypin tunnistaminen. Sanakirjoja voi ladata tai luoda itse lisää.

      $hashid     
- [Karvinen 2023: Crack File Password With John](https://terokarvinen.com/2023/crack-file-password-with-john/)

John tarvitsemien työkalujen asennus.

      $ sudo apt-get -y install micro bash-completion git build-essential libssl-dev zlib1g zlib1g-dev zlib-gst libbz2-1.0 libbz2-dev atool zip wget
## a) Hashcat. Asenna Hashcat ja testaa sen toimivuus ratkaisemalla tiiviste.
Aluksi tarkistin ja asensin kaliin päivityksen.

      $ sudo apt update && sudo apt upgrade
Minulla oli kalilla hashcat jo asennettuna, joten poistin sen ja asensin uudelleen.

![Alt text](/H7Hash/kuvat/h7.a1.png)

      $ sudo apt-get remove hashcat
![Alt text](/H7Hash/kuvat/h7.a2.png)

Hashcatin asentaminen:

      $ sudo apt-get install hashcat
Uuden kansion luominen, johon latasin yhden sanakirjan. Hashcat tarvitsee jonkun sanakirjan, koska se testaa kaikki sanakirjasta löytyvät sanat salasanoiksi. 

      $ mkdir passwdcrack_dictionarys
      $ cd passwdcrack_dictionarys    
Tässä tapauksessa latasin aluksi 'Rockyou' sanakirjan ja purin sen.

      $ wget https://github.com/danielmiessler/SecLists/raw/master/Passwords/Leaked-Databases/rockyou.txt.tar.gz
      $ tar xf rockyou.txt.tar.gz
      $ rm rockyou.txt.tar.gz

Kävin muuttamassa jonkun sanan MD5 hashiksi (https://www.md5hashgenerator.com/). Sana oli 'oucookie' ja sen MD5 hash oli '7665fe499f9f9fefef960c3d7671fb91'. Yritin selvittää hashcatilla tämän hashin tyypin.

      $ hashid -m 7665fe499f9f9fefef960c3d7671fb91
![Alt text](/H7Hash/kuvat/h7.a3.png)

Koska tiesin, että kyseessä on MD5 hash, niin päätin testata sillä eli 'hashcat mode: 0'.

- -m 0 = hashin tyyppi pitää määritellä.
- '7665fe499f9f9fefef960c3d7671fb91' = hash joka halutaan murtaa.
- rockyou.txt = murtamiseen käytettävä sanakirja.
- -0 solved = vastauksen tallentaminen tiedostoon.

      $ hashcat -m 0 '7665fe499f9f9fefef960c3d7671fb91' rockyou.txt -o solved
'Status..........: Exhausted' eli kyseistä sanaa ei löytynyt rockyou.txt sanakirjasta. Päätin muuttaa sanan 'oucookie' -> 'cookies'. Kävin luomassa MD5 generaattorilla sanan 'cookies' hashin ja testasin ajaa hashcatin saamallani MD5 hashilla '55e7dd3016ce4ac57b9a0f56af12f7c2'.

      $ hashcat -m 0 '55e7dd3016ce4ac57b9a0f56af12f7c2' rockyou.txt -o solved
'Status...........: Cracked'. Katsoin solved kansion sisällön ja hashia vastaava salasana löytyi.

![Alt text](/H7Hash/kuvat/h7.a4.png)

## b) John. Asenna Jumbo John ja testaa sen toimivuus murtamalla jonkin tiedoston salasana.
Aluksi John the Ripperin jumbo version git repon kloonaaminen. (muista asentaa tarvittavat työkalut ja kirjastot, jotta Johnin asetaminen onnistuu.) Itse asensin seuraavat:

      $ sudo apt-get install build-essential zlib1g zlib1g-dev libbz2-1.0 libbz2-dev

      $ git clone --depth=1 https://github.com/openwall/john.git 
Siirryin john/src kansioon ja ./configure

      $ cd john/src
      $ ./configure
Sain seuraavan errorin:

![Alt text](/H7Hash/kuvat/h7.b3.png)

Joten testasin asentaa sen vielä:

      $ sudo apt-get install libssl-dev

Jonka jälkeen yritin uudelleen ./configure.

![Alt text](/H7Hash/kuvat/h7.b1.png)

Nyt Johnin konfiguroiminen meni läpi ja nyt viimeinen askel, jotta John saadaan toimimaan, kuten kuvasta näkyy.

      $ make -s clean && make -sj4
Tämä meni läpi. Testasin vielä, että John toimii.

      $ $HOME/john/run/john
$HOME/john/run/john tero.zip.hash 

Latasin [teron ohjeen](https://terokarvinen.com/2023/crack-file-password-with-john/) testi tiedoston zip tiedoston. 

Loin tero.zip tiedostosta hashin omaan tiedostoon ja ajoin Johnin tätä hashia vastaan.

      $ $HOME/john/run/zip2john tero.zip >tero.zip.hash
![Alt text](/H7Hash/kuvat/h7.b4.png)

      $ $HOME/john/run/john tero.zip.hash 
 ![Alt text](/H7Hash/kuvat/h7.b5.png)     

Johnin löytämällä sanalla 'butterfly' avautui tiedosto tero.zip/secretFiles/SECRET.md. Tiedosto näytti seuraavalta:

 ![Alt text](/H7Hash/kuvat/h7.b6.png)     

## c) f5bc7fcc7f5b3b6af7ff79e0feafad6d1a948b6a2c18de414993c1226be48c1f on erään tällä tehtäväsivulla olevan yksittäisen sanan tiiviste. Käytin hyvin yleistä ja tunnettua tiivistealgoritmia. Sanassa voi olla isoja kirjaimia, mutta ei erikoismerkkejä. Minkä sanan tiiviste on kyseessä?






## Lähteet
https://terokarvinen.com/2023/eettinen-hakkerointi-2023/

https://terokarvinen.com/2022/cracking-passwords-with-hashcat/

https://terokarvinen.com/2023/crack-file-password-with-john/

https://www.md5hashgenerator.com/


